<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Task</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (task of tasks; track task.id) {
            <tr [class.completed]="task.completed">
              <td>
                @if (editingId !== task.id) {
                  <span [class.text-decoration-line-through]="task.completed">
                    {{ task.text }}
                  </span>
                } @else {
                  <input 
                    type="text" 
                    class="form-control" 
                    [(ngModel)]="editedText"
                  >
                }
              </td>
              <td>
                @if (editingId !== task.id) {
                  <div>
                    <button class="btn btn-sm btn-outline-primary me-2" (click)="startEditing(task)">
                      <i class="bi bi-pencil"></i> Edit
                    </button>
                    <button class="btn btn-sm btn-outline-success me-2" (click)="toggleComplete(task)">
                      <i class="bi bi-check2"></i> {{ task.completed ? 'Undo' : 'Complete' }}
                    </button>
                    <button class="btn btn-sm btn-outline-danger" (click)="deleteTask.emit(task.id)">
                      <i class="bi bi-trash"></i> Delete
                    </button>
                  </div>
                } @else {
                  <div>
                    <button class="btn btn-sm btn-outline-success me-2" (click)="saveEdit(task.id)">
                      <i class="bi bi-check2"></i> Save
                    </button>
                    <button class="btn btn-sm btn-outline-secondary" (click)="cancelEdit()">
                      <i class="bi bi-x"></i> Cancel
                    </button>
                  </div>
                }
              </td>
            </tr>
          } @empty {
            <tr>
              <td colspan="2" class="text-center">No tasks found. Add a new task above!</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>